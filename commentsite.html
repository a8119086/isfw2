<!DOCTYPE html>

<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

    <script type="text/javascript" src="lib/jquery.min.js"></script>
    <script type="text/javascript" src="lib/osql.js"></script>
    <link rel="stylesheet" href="css.css">

    <script>
        osql.requireLogin();

        $().ready(function () {
            movies();
            comment();
        });


        async function movies() {
            var movie_id = parseInt(osql.getParam('movie_id'));
            console.log(movie_id);
            var sql = `select * from Classes inner join Movies on Classes.id=Movies.class_id where Movies.id="${movie_id}";`;
            var objects = await osql.connect(sql);
            
            var title = objects[0].name;
            document.getElementById('title').innerHTML = title;

            var moviename = objects[0].title;
            var url = objects[0].URL;
            document.getElementById('name').innerHTML = moviename;

            document.getElementById('youtube').innerHTML = '<iframe src="' + url + '" title="YouTube video player" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>';
        }

        async function comment() {

        }


    </script>
</head>

<body>
    <h1 id="title"></h1>
    <p id="name"></p>
    <hr>
    <div>
        <p id="youtube"></p>
    </div>
</body>

</html>